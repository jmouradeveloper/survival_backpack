#!/usr/bin/env bash
# Script para acessar o console Rails no container Docker

set -e

# Verificar se docker estÃ¡ instalado
if ! command -v docker &> /dev/null; then
    echo "âŒ Docker nÃ£o estÃ¡ instalado."
    exit 1
fi

# Verificar se o container estÃ¡ rodando
CONTAINER_NAME="survival_backpack_web"
if ! docker ps --format '{{.Names}}' | grep -q "^${CONTAINER_NAME}$"; then
    echo "âŒ Container ${CONTAINER_NAME} nÃ£o estÃ¡ rodando."
    echo "Execute primeiro: bin/docker-up"
    exit 1
fi

echo "ðŸš€ Acessando console Rails no container..."
echo "ðŸ’¡ Para sair, digite 'exit' ou pressione Ctrl+D"
echo ""

# Acessar o console Rails
if docker compose version &> /dev/null; then
    docker compose exec web bin/rails console
else
    docker-compose exec web bin/rails console
fi

